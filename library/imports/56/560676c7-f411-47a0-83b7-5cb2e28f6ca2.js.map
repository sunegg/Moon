{"version":3,"sources":["assets/scripts/Appegg.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAkC;AAE5B,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAoC,0BAAY;IADhD;QAAA,qEA4EC;QA1EC,eAAS,GAAW,8CAA8C,CAAC;QACnE,YAAM,GAAW,kCAAkC,CAAC;QACpD,gBAAU,GAAW,kCAAkC,CAAC;;QA2D1D;;;;;;;;;;;aAWK;IAEL,CAAC;IAtEC,sBAAK,GAAL;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,wBAAO,GAAP;QACE,IAAI,CAAC,YAAY,CACf,IAAI,CAAC,SAAS,EACd,UAAU,GAAG;YACX,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC1B,kBAAQ,CAAC,GAAG,GAAE,GAAG,CAAC,GAAG,CAAC;YACtB,kBAAQ,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC;YACrC,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;YACxC,QAAQ,GAAG,CAAC,OAAO,EAAE;gBACnB,KAAK,CAAC;oBACJ,yCAAyC;oBACzC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;oBAC9B,MAAM;gBACR,KAAK,CAAC;oBACJ,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;oBAC7B,MAAM;gBACR,KAAK,CAAC;oBACJ,MAAM;aACT;QACH,CAAC,EACD;YACE,iBAAiB;QACnB,CAAC,CACF,CAAC;IACJ,CAAC;IAID,6BAAY,GAAZ,UAAa,MAAM,EAAE,QAAQ,EAAE,KAAY;QAAZ,sBAAA,EAAA,YAAY;QACzC,IAAI,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;QACnC,OAAO,CAAC,OAAO;YACb,UAAU,CAAC;gBACT,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACtB,CAAC,CAAC;QACJ,OAAO,CAAC,SAAS;YACf,UAAU,CAAC;gBACT,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACtB,CAAC,CAAC;QACJ,OAAO,CAAC,kBAAkB,GAAG;YAC3B,IAAI,OAAO,CAAC,UAAU,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,IAAI,GAAG;gBAClD,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;iBAC5B;gBACH,KAAK,EAAE,CAAC;aACT;QACH,CAAC,CAAC;QAEF,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,WAAW;QAC/C,OAAO,CAAC,gBAAgB,CAAC,uBAAuB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/D,OAAO,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACjE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;IA5DkB,MAAM;QAD1B,OAAO;OACa,MAAM,CA2E1B;IAAD,aAAC;CA3ED,AA2EC,CA3EmC,EAAE,CAAC,SAAS,GA2E/C;kBA3EoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import GameData from \"./GameData\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Appegg extends cc.Component {\n  configUrl: string = \"https://api2.bmob.cn/1/classes/List/uYzgaaad\";\n  apiKey: string = \"cea1f887c9266afc24caef6c822b200d\";\n  restApiKey: string = \"690abdf51c311db72949a4d6410f2b66\";\n\n  start() {\n    this.connect();\n  }\n\n  connect() {\n    this.httpGetAsync(\n      this.configUrl,\n      function (str) {\n        console.log(str);\n        var obj = JSON.parse(str);\n        GameData.url= obj.url;\n        GameData.privacyUrl = obj.privacyUrl;\n        console.log(\"当前appType为\" + obj.appType);\n        switch (obj.appType) {\n          case 1:\n            //if (this.currentVersion != obj.version)\n            cc.director.loadScene(\"main\");\n            break;\n          case 2:\n            cc.director.loadScene(\"web\");\n            break;\n          case 3:\n            break;\n        }\n      },\n      function () {\n        //cc.log(\"连接失败\");\n      }\n    );\n  }\n\n\n\n  httpGetAsync(theUrl, callback, error = null) {\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.onerror ==\n      function (e) {\n        console.log(\"网络错误\");\n      };\n    xmlHttp.ontimeout ==\n      function (e) {\n        console.log(\"网络超时\");\n      };\n    xmlHttp.onreadystatechange = function () {\n      if (xmlHttp.readyState == 4 && xmlHttp.status == 200)\n        callback(xmlHttp.responseText);\n      else {\n        error();\n      }\n    };\n\n    xmlHttp.open(\"GET\", theUrl, false); // true 为异步\n    xmlHttp.setRequestHeader(\"X-Bmob-Application-Id\", this.apiKey);\n    xmlHttp.setRequestHeader(\"X-Bmob-REST-API-Key\", this.restApiKey);\n    xmlHttp.send(null);\n  }\n\n/*  onRetryClick(event) {\n    this.errorView.active = false;\n    this.connect();\n  }\n\n  onPrivacyClick(event) {\n    this.webView.active = true;\n  }\n\n  onStartClick(event) {\n    cc.director.loadScene(\"entry\");\n  }*/\n\n}\n"]}