{"version":3,"sources":["assets/scripts/Jump.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport GameManager from \"./GameManager\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Jump extends cc.Component {\n\n\n  static instance: Jump;\n\n  startTime: number;\n\n  @property\n  speed: number = 1;\n\n  rigidBody: cc.RigidBody;\n\n  collider: cc.PhysicsBoxCollider;\n\n  animation: cc.Animation;\n\n  tween: cc.Tween;\n\n  isJump = false;\n\n\n  isAvailable = true;\n\n  //maxPower: number;\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    Jump.instance = this;\n    this.rigidBody = this.getComponent(cc.RigidBody);\n    this.animation = this.getComponent(cc.Animation);\n    this.collider = this.getComponent(cc.PhysicsBoxCollider);\n    cc.director.getPhysicsManager().enabled = true;\n    var manager = cc.director.getCollisionManager();\n    manager.enabled = true;\n  }\n\n  start() {\n    this.node.on(\n      \"addScore\",\n      function (score) {\n        this.isJump = false;\n        this.isAvailable = true;\n        // GameManager.instance.node.emit(\"addScore\", 1);\n         this.collider.sensor = false;\n      },\n      this\n    );\n    this.node.on(\n      cc.Node.EventType.MOUSE_DOWN,\n      function (event) {\n        this.startTime = Date.now().toFixed();\n        this.tween = cc.tween(this.node).to(1, { scale: 1.5 }).start();\n      },\n      this\n    );\n    this.node.on(\n      cc.Node.EventType.MOUSE_UP,\n      function (event) {\n        var delta = parseInt(Date.now().toFixed()) - this.startTime;\n        //console.log(\"Mouse up\" + delta);\n        this.jump(delta);\n      },\n      this\n    );\n  }\n\n  jump(power: number) {\n    if (this.isAvailable) {\n      this.isAvailable = false;\n      this.isJump = true;\n      this.collider.sensor = true;\n      GameManager.instance.node.emit(\"jump\");\n      this.tween.stop();\n      this.tween = cc.tween(this.node).to(1, { scale: 1 }).start();\n      //console.log(\"jump\" + power);\n      this.animation.play();\n      this.rigidBody.linearVelocity = cc.v2(0, power * this.speed);\n    }\n  }\n\n  update(dt) {\n   // if (this.node.position.y >= GameManager.currentGoal && this.isJump) {\n    //  this.isJump = false;\n     // GameManager.instance.node.emit(\"addScore\", 1);\n   //   this.collider.sensor = false;\n   // }\n  }\n}\n"]}